<cib admin_epoch="0" have_quorum="true" ignore_dtd="false" num_peers="2" cib_feature_revision="1.3" generated="true" ccm_transition="4" dc_uuid="98cb65d7-0f45-4132-9993-2f95ad832a65" epoch="126" num_updates="1" cib-last-written="Mon Nov  5 00:26:47 2007">
   <configuration>
     <crm_config>
       <cluster_property_set id="cib-bootstrap-options">
         <attributes>
           <nvpair id="cib-bootstrap-options-symmetric-cluster" name="symmetric-cluster" value="true"/>
           <nvpair id="cib-bootstrap-options-no_quorum-policy" name="no_quorum-policy" value="stop"/>
           <nvpair id="cib-bootstrap-options-default-resource-stickiness" name="default-resource-stickiness" value="0"/>
           <nvpair id="cib-bootstrap-options-default-resource-failure-stickiness" name="default-resource-failure-stickiness" value="0"/>
           <nvpair id="cib-bootstrap-options-stonith-enabled" name="stonith-enabled" value="false"/>
           <nvpair id="cib-bootstrap-options-stonith-action" name="stonith-action" value="reboot"/>
           <nvpair id="cib-bootstrap-options-stop-orphan-resources" name="stop-orphan-resources" value="true"/>
           <nvpair id="cib-bootstrap-options-stop-orphan-actions" name="stop-orphan-actions" value="true"/>
           <nvpair id="cib-bootstrap-options-remove-after-stop" name="remove-after-stop" value="false"/>
           <nvpair id="cib-bootstrap-options-short-resource-names" name="short-resource-names" value="true"/>
           <nvpair id="cib-bootstrap-options-transition-idle-timeout" name="transition-idle-timeout" value="5min"/>
           <nvpair name="default-action-timeout" id="cib-bootstrap-options-default-action-timeout" value="45s"/>
           <nvpair id="cib-bootstrap-options-is-managed-default" name="is-managed-default" value="true"/>
         </attributes>
       </cluster_property_set>
     </crm_config>
     <nodes>
       <node id="98cb65d7-0f45-4132-9993-2f95ad832a65" uname="serv-db" type="normal"/>
       <node id="ff742d5c-58b9-4737-8084-b764d7761951" uname="serv-appl" type="normal"/>
     </nodes>
     <resources>
       <group id="group_1">
         <primitive class="ocf" provider="heartbeat" type="IPaddr" id="IPaddr_172_30_0_254">
           <operations>
             <op id="IPaddr_172_30_0_254_mon" interval="5s" name="monitor" timeout="5s" start_delay="0" disabled="false" role="Started"/>
           </operations>
           <instance_attributes id="IPaddr_172_30_0_254_inst_attr">
             <attributes>
               <nvpair id="IPaddr_172_30_0_254_attr_0" name="ip" value="172.30.0.254"/>
               <nvpair name="netmask" id="IPaddr_172_30_0_254_attr_1" value="32"/>
               <nvpair id="IPaddr_172_30_0_254_attr_2" name="nic" value="bond0"/>
             </attributes>
           </instance_attributes>
         </primitive>
         <primitive id="db-filesystem" class="ocf" type="Filesystem" provider="heartbeat">
           <operations>
             <op name="monitor" interval="10s" timeout="60s" prereq="nothing" id="db-filesystem-op-01"/>
           </operations>
           <instance_attributes id="db-filesystem">
             <attributes>
               <nvpair id="db-filesystem-01" name="device" value="/dev/sdc1"/>
               <nvpair id="db-filesystem-02" name="directory" value="/var/lib/pgsql"/>
               <nvpair id="db-filesystem-03" name="fstype" value="ext3"/>
               <nvpair id="db-filesystem-04" name="options" value="rw,acl,user_xattr"/>
             </attributes>
           </instance_attributes>
         </primitive>
         <primitive class="ocf" provider="heartbeat" type="MailTo" id="MailTo_2">
           <operations>
             <op id="d1c81058-3551-4e34-a365-4028404dd1a7" name="start" timeout="4"/>
             <op id="1b0cb019-7852-4f11-a256-8a400de0ab6a" name="stop" timeout="4"/>
           </operations>
           <instance_attributes id="MailTo_2_inst_attr">
             <attributes>
               <nvpair id="MailTo_2_attr_0" name="email" value="root@localhost"/>
               <nvpair id="MailTo_2_attr_1" name="subject" value="DB-FailOver"/>
             </attributes>
           </instance_attributes>
         </primitive>
         <primitive class="lsb" provider="heartbeat" type="postgresql" id="postgresql_3">
           <operations>
             <op id="5351277d-9be1-4d17-aec6-7bfcbf2e0548" name="start" timeout="50" start_delay="4" disabled="false" role="Started"/>
             <op id="10f984f4-4da3-4e93-9204-9ea0aa6d34b0" name="stop" timeout="50" start_delay="4" disabled="false" role="Started"/>
           </operations>
         </primitive>
       </group>
       <group id="group_11">
         <primitive class="ocf" id="IPaddr_192_168_90_1" provider="heartbeat" type="IPaddr">
           <operations>
             <op id="IPaddr_192_168_90_1_mon" interval="5s" name="monitor" timeout="5s" start_delay="0" disabled="false" role="Started"/>
           </operations>
           <instance_attributes id="IPaddr_192_168_90_1_inst_attr">
             <attributes>
               <nvpair id="IPaddr_192_168_90_1_attr_0" name="ip" value="192.168.90.1"/>
               <nvpair id="IPaddr_192_168_90_1_attr_1" name="netmask" value="32"/>
               <nvpair id="IPaddr_192_168_90_1_attr_2" name="nic" value="eth0"/>
             </attributes>
           </instance_attributes>
         </primitive>
         <primitive id="appl-filesystem" class="ocf" type="Filesystem" provider="heartbeat">
           <operations>
             <op name="monitor" interval="10s" timeout="60s" prereq="nothing" id="appl-filesystem-op-01"/>
             <op name="stop" start_delay="8" timeout="60s" prereq="nothing" id="appl-filesystem-op-02"/>
             <op name="start" start_delay="8" timeout="60s" prereq="nothing" id="appl-filesystem-op-03"/>
           </operations>
           <instance_attributes id="appl-filesystem">
             <attributes>
               <nvpair id="appl-filesystem-01" name="device" value="/dev/sdb1"/>
               <nvpair id="appl-filesystem-02" name="directory" value="/opt/appl"/>
               <nvpair id="appl-filesystem-03" name="fstype" value="ext3"/>
               <nvpair id="appl-filesystem-04" name="options" value="rw,acl,user_xattr"/>
             </attributes>
           </instance_attributes>
         </primitive>
         <primitive class="ocf" provider="heartbeat" type="MailTo" id="MailTo_12">
           <operations>
             <op id="e6be742b-1421-4981-a2f6-f8a9048f2b66" name="start" timeout="4"/>
             <op id="91c420c3-6102-42be-b6f5-cd388a29a8ad" name="stop" timeout="4"/>
           </operations>
           <instance_attributes id="MailTo_12_inst_attr">
             <attributes>
               <nvpair id="MailTo_12_attr_0" name="email" value="root@localhost"/>
               <nvpair id="MailTo_12_attr_1" name="subject" value="APP-FailOver"/>
             </attributes>
           </instance_attributes>
         </primitive>
         <primitive class="lsb" provider="heartbeat" type="appl1" id="appl1_13">
           <operations>
             <op id="a6cc2eb3-b389-46a0-b49f-a52d44430798" name="start" timeout="50" start_delay="4" disabled="false" role="Started"/>
             <op id="5ab20e80-a0b7-4428-b056-1cd7cc9e9be3" name="stop" timeout="50" start_delay="4" disabled="false" role="Started"/>
             <op id="0a25cc79-5359-4d9d-99b5-9ee1cf1c5a9f" name="monitor" interval="45" timeout="15" start_delay="15"/>
           </operations>
           <instance_attributes id="appl1_13">
             <attributes>
               <nvpair name="target_role" id="appl1_13-target_role" value="started"/>
             </attributes>
           </instance_attributes>
         </primitive>
         <primitive class="lsb" provider="heartbeat" type="appl2" id="appl2_14">
           <operations>
             <op id="a1df9f2e-7854-4f3b-be4a-333fe5484bda" name="start" timeout="50" start_delay="4" disabled="false" role="Started"/>
             <op id="f21e4de2-533a-4e67-aa50-221f523b3ed6" name="stop" timeout="50" start_delay="4" disabled="false" role="Started"/>
             <op id="20aa6a5b-d7b8-490b-9f18-53ab69f1d9a3" name="monitor" interval="45" timeout="15" start_delay="15"/>
           </operations>
         </primitive>
       </group>
     </resources>
     <constraints>
       <rsc_location id="rsc_location_group_1" rsc="group_1">
         <rule id="prefered_location_group_1" score="100">
           <expression attribute="#uname" id="prefered_location_group_1_expr" operation="eq" value="serv-db"/>
         </rule>
       </rsc_location>
       <rsc_location id="rsc_location_group_11" rsc="group_11">
         <rule id="prefered_location_group_11" score="100">
           <expression attribute="#uname" id="prefered_location_group_11_expr" operation="eq" value="serv-appl"/>
         </rule>
       </rsc_location>
       <rsc_location id="group_11:connected" rsc="group_11">
         <rule id="group_11:connected:rule" score="-INFINITY" boolean_op="or">
           <expression id="group_11:connected:expr:undefined" attribute="pingd" operation="not_defined"/>
           <expression id="group_11:connected:expr:zero" attribute="pingd" operation="lte" value="0"/>
         </rule>
       </rsc_location>
       <rsc_order id="orderconstraints-01" from="group_1" to="group_11" type="before"/>
     </constraints>
   </configuration>
</cib>
